<!DOCTYPE html><html>

<head>
<meta charset="utf-8">
<title>${HTML_TITLE}</title>
<link rel="shortcut icon" href="${STATIC_URL}images/bk_fta_solutions.png" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="${STATIC_URL}doc/css/style.css?v=${STATIC_VERSION}">
</head>
<body><div class="markdown-body">
<h2 id="toc_0">什么是组合套餐？</h2>

<p>组合套餐，   顾名思义就是把故障自愈该业务下的套餐和官方通用套餐组合起来使用。</p>

<p>组合套餐的配置其实就是维护一棵二叉树。节点的左节点表示成功的后续套餐，右节点表示失败的后续套餐。<br/>
<img src="${STATIC_URL}doc/images/14899712100461.jpg" alt=""/>￼<br/>
如上图，会先调用 A 套餐。</p>

<p>A 套餐成功的话调用 B 套餐。B 套餐成功的话就结束，失败的话就调用 D 套餐。</p>

<p>A 套餐失败的话调用 C 套餐。失败的话最多再重试两次 C 套餐。</p>

<p>组合套餐的状态将由最后一个执行的套餐决定。</p>

<h2 id="toc_1">1. 操作说明</h2>

<p><img src="${STATIC_URL}doc/images/14899712260835.jpg" alt=""/>￼</p>

<p>选择框选择该节点的套餐</p>

<p>绿色的“成功”按钮新建一个左节点</p>

<p>红色的“失败”按钮新建一个右节点</p>

<p>黄色的“X”按钮删除自身节点（为防止误操作，只有该节点为叶子节点时才能被删除）</p>

<h2 id="toc_2">2.组合套餐可选的套餐太少？</h2>

<p>先建节点，再建树。</p>

<p>先新建一些其他的基础套餐，然后就能在组合套餐里选用。</p>

<p>如果现有的基础套餐类型太少，无法满足需求，欢迎向故障自愈团队提需求，帮助我们完善套餐库。</p>

<h2 id="toc_3">3.套餐间怎么传参数？</h2>

<p>节点套餐是没有输出的，所以套餐间无法传参。</p>

<p>但是创建节点套餐时是可以填参数的。目前支持的参数请参考：<br/>
<strong>《故障自愈 套餐传入变量参数的说明》</strong></p>

<h2 id="toc_4">4.怎么处理复杂的分支判断？</h2>

<p>如果你需要根据外部系统的状态来决定分支，比如通过调用一个查询组件来根据返回的结果决定后续分支。你可以通过自定义芯雲任务套餐来写一段分析判断脚本。最后通过返回规定的返回格式让组合套餐判断后续的处理。</p>

<p>不要被“成功”和“失败”的字面所迷惑，因为过程节点并不会决定组合套餐最后的状态。这其实就是 True 和 False。</p>

<h2 id="toc_5">5.组合套餐怎么并行？</h2>

<p>历史告诉我们，故障处理时并行处理套餐的需求并不强烈。</p>

<p>如果你真有这种需求或有好的意见欢迎联系自愈团队</p>

</div></body>

</html>
